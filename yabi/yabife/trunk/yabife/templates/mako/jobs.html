<%inherit file="base.html"/>
<%def name="header()">

<script language="javascript">
YAHOO.util.Event.onAvailable("container", initWorkflowListing);

var workflowListing;
var workflow;

function initWorkflowListing() {
    workflowListing = new YabiWorkflowCollection();
    workflowListing.solidify(YAHOO.lang.JSON.parse('[{"name":"test", "status":"Completed", "tags":["blast", "spirochaetes"], "last_modified_on":"09-09-2009", "id":1}, {"name":"sample", "status":"Completed", "tags":["hmmpfam", "spirochaetes"], "last_modified_on":"10-09-2009", "id":2}, {"name":"zip", "status":"Completed", "tags":["zip"], "last_modified_on":"10-09-2009", "id":3}]'));
    document.getElementById("workflowListingContainer").appendChild(workflowListing.containerEl);
    
    document.getElementById("container").appendChild(workflowListing.noSelectionDiv);
    
//    workflow = new YabiWorkflow(false);
//    document.getElementById("container").appendChild(workflow.mainEl);
//    document.getElementById("optionsDiv").appendChild(workflow.optionsEl);
//    workflow.updateName('test workflow');
//    workflow.addJob("fileselector", false);
}

function summonWorkflow(id) {
    workflow = new YabiWorkflow(false);
    workflow.hydrate(id);
}

function destroyWorkflow() {
    workflow.destroy();
    return false;
}
</script>


</%def>

<%def name="body()">

  <div id="doc3" class="yui-t1" style="height:100%;">
    <div id="yabi-jobs-mode">
      <div id="hd">
        <p><img src="${h.url('/static/images/yabi-logo.png')}" alt="Yabi-logo" height="60" width="198" />  

            <div id="yabi-message-ajax">
            </div>

            <div id="yabi-tabs">

              <a href="${h.url('jobs')}" id="yabi-tabs-jobs">jobs</a>
              <a href="${h.url('design')}" id="yabi-tabs-design">design</a>
              <a href="${h.url('files')}" id="yabi-tabs-files">files</a>
            </div>

            <div id="userinfo">
              <a href="${h.url('logout')}" class="fakeButton">log out ${request.user.username}</a>        
            </div>

      </div>

      <script type="text/javascript">
        //<![CDATA[

        YAHOO.util.Event.onAvailable('yabi-message-success', YAHOO.ccgyabi.YabiMessage.fade, this);
        YAHOO.util.Event.onAvailable('yabi-message-warn', YAHOO.ccgyabi.YabiMessage.fade, this);
        YAHOO.util.Event.onAvailable('yabi-message-fail', YAHOO.ccgyabi.YabiMessage.fade, this);

        //]]>
      </script>
      

          <div style="position:absolute;left:0px;top:63px;width:290px;padding:5px;">
                  <div id="workflowListingContainer"></div>
          </div>
          <div class="yabiMiddleColumn">
                  <div id="container"></div>
          </div>
          <div style="position:absolute;left:670px;top:63px;padding:5px;">
                <div id="optionsDiv"></div>
          </div>

    </div>
  </div>
</%def>
