<?xml version="1.0" encoding="ISO-8859-1"?>
<xml-response type="data">
    <process-definition name="$!processDefinition.name" version="$!processDefinition.version">
    <instance hasEnded="$!pi.hasEnded()" id="$!pi.id" start="$!pi.start" end="$!pi.end">
        <tokens>
    #foreach ($token in $tokens)
        #if (!$token.name)
            <roottoken node="$!token.node.fullyQualifiedName"/>
        #else
            <token name="$!token.name" node="$!token.node.fullyQualifiedName"/>
        #end
    #end
        </tokens>
        <variables>
    #foreach ($node in $variables.keySet())
            <node name="$!node">
                <inputs>
        #foreach ($variable in $variables.get($node).get("input").keySet())
                    <variable key="$variable" value="$esc.xml($!variables.get($node).get("input").get($variable))"/>
        #end
                </inputs>
                <outputs>
        #foreach ($variable in $variables.get($node).get("output").keySet())
                    <variable key="$variable" value="$esc.xml($!variables.get($node).get("output").get($variable))"/>
        #end
                </outputs>
            </node>
    #end
        </variables>
    </instance>
    </process-definition>
</xml-response>
